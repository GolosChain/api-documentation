# Документация для работы с API сервисов CyberWay BackEnd

## Оглавнение

- [Пояснения](#пояснения)
  - [Общая информация](#общая-информация)
  - [Формат запросов и ответов](#формат-запросов-и-ответов)
- [API](#api)
  - [Авторизация](#авторизация)
    - [auth.generateSecret](#authgeneratesecret)
    - [auth.authorize](#authauthorize)
  - [Регистрация](#регистрация)
    - [registration.getState](#registrationgetstate)
    - [registration.firstStep](#registrationfirststep)
    - [registration.verify](#registrationverify)
    - [registration.toBlockChain](#registrationtoblockchain)
    - [registration.changePhone](#registrationchangephone)
    - [registration.resendSmsCode](#registrationresendsmscode)
    - [registration.subscribeOnSmsGet](#registrationsubscribeonsmsget)
  - [Настройки пользователя](#настройки-пользователя)
    - [options.get](#optionsget)
    - [options.set](#optionsset)
  - [Онлайн-нотификации с учетом настроек (WebSocket)](#онлайн-нотификации-с-учетом-настроек-websocket)
    - [onlineNotify.on](#onlinenotifyon)
    - [onlineNotify.off](#onlinenotifyoff)
    - [onlineNotify.history](#onlinenotifyhistory)
    - [onlineNotify.historyFresh](#onlinenotifyhistoryfresh)
  - [Push-нотификации с учетом настроек (Push для мобильных устройств)](#push-нотификации-с-учетом-настроек-push-для-мобильных-устройств)
    - [push.notifyOn](#pushnotifyon)
    - [push.notifyOff](#pushnotifyoff)
    - [push.history](#pushhistory)
    - [push.historyFresh](#pushhistoryfresh)
  - [Нотификации пользователя и черные списки](#нотификации-пользователя-и-черные-списки)
    - [notify.getHistory](#notifygethistory)
    - [notify.getHistoryFresh](#notifygethistoryfresh)
    - [notify.markAsViewed](#notifymarkasviewed)
    - [notify.markAllAsViewed](#notifymarkallasviewed)
    - [notify.markAsRead](#notifymarkasread)
    - [notify.markAllAsRead](#notifymarkallasread)
    - [notify.getBlackList](#notifygetblacklist)
    - [notify.addToBlackList](#notifyaddtoblacklist)
    - [notify.removeFromBlackList](#notifyremovefromblacklist)
  - [Избранное](#избранное)
    - [favorites.get](#favoritesget)
    - [favorites.add](#favoritesadd)
    - [favorites.remove](#favoritesremove)
  - [Мета-данные](#мета-данные)
    - [meta.markUserOnline](#metamarkuseronline)
    - [meta.recordPostView](#metarecordpostview)
    - [meta.getPostsViewCount](#metagetpostsviewcount)
    - [meta.getUserLastOnline](#metagetuserlastonline)
  - [Курсы валют](#курсы-валют)
    - [rates.getActual](#ratesgetactual)
    - [rates.getHistorical](#ratesgethistorical)
    - [rates.getHistoricalMulti](#ratesgethistoricalmulti)
  - [Контент и ленты](#контент-и-ленты)
    - [content.getProfile](#contentgetprofile)
    - [content.getPost](#contentgetpost)
    - [content.getFeed](#contentgetfeed)
    - [content.getComment](#contentgetcomment)
    - [content.getComments](#contentgetcomments)
    - [content.getHashTagTop](#contentgethashtagtop)
    - [content.getLeadersTop](#contentgetleaderstop)
    - [content.getPostVotes](#contentgetpostvotes)
    - [content.getCommentVotes](#contentgetcommentvotes)
    - [content.resolveProfile](#contentresolveprofile)
    - [content.getSubscriptions](#contentgetsubscriptions)
    - [content.getSubscribers](#contentgetsubscribers)
  - [Встроенный контент](#встроенный-контент)
    - [frame.getEmbed](#framegetembed)

## Пояснения

#### Общая информация

Инфраструктура CyberWay состоит из 3х основных частей:

- CyberWay BlockChain
- CyberWay BackEnd
- CyberWay Client

Любой сайт, мобильное приложение или что-либо иное, общающееся с BlockChain и/или BackEnd относится к категории Client.

К BlockChain относятся блокчейн-ноды CyberWay и вспомогательные сервисы, подключаемые напрямую к блокчейн-ноде и
существующие вместе с ней, например EventEngine, который может отсутсвовать или присутствовать у каждой конкретной ноды,
но является лишь вспомогательной частью или утилитой и относится к категории BlockChain.

К категории BackEnd относятся разнообразные вспомогательные микросервисы, имеющие одну единую точку входа для каждого
набора запущенных микросервисов. Эта документация содержит описание общения именно с этими микросервисами через
единую точку входа и предполагает что за ней находятся и развернуты все необходимые микросервисы.

#### Формат запросов и ответов

Для того чтобы подключиться к системе необходимо создать WebSocket подключение к входной точке по установленному
эндпоинту подключения. Например - `wss://gate.site.com`.

Общение происходит по протоколу [JSON-RPC 2.0](https://www.jsonrpc.org/specification) с некоторыми более строгими
правилами:

- Параметры запроса должны только быть именованными, в виде JSON-объекта, безымянные не поддерживаются.
- Результат запроса в поле `result` всегда содержит JSON объект с результатом выполнения.
- В случае если результат запроса не предполагает конкретного ответа - в поле `result` всегда содержит JSON объект
  с данными `{"status": "OK"}` (без вариаций).
- В случае ошибки в поле `error` всегда содержится ответ формата `{"code": 123, "message": "Description text"}`,
  где `code` это цифровой код ошибки, описывающий тип проишествия, а `description` - текстовую ремарку для понимания
  ошибки человеком.
- RPC-нотификации работают как указано в стандарте, запросы без поля `id` не получают ответа, но сервер может
  их обработать по своему усмотрению.

Дополнительно стоит учитывать что сервер сам может передавать данные на клиент без получения запроса - например
так работает рассылка о событиях для пользователя, данные поступают через WebSocket со стороны сервера и
являются RPC-нотификациями, что не требует от клиента возвращать серверу какой-либо ответ.

## API

### Авторизация

Все действия, входящие в зону ответственности CyberWay BackEnd, можно исполнять от имени пользователя
единожды авторизовавшись в системе, авторизация будет считаться активной пока открыто websocket-соединение
с сервером.

Для того чтобы авторизироваться потребуется вызвать метод `auth.generateSecret`, который предоставит
секретную строку. Эту строку необходимо будет подписать приватным ключем, что и укажет на тот факт что
пользователь имеет права исполнять действия от своего имени.

Процесс авторизации можно описать таким кодом на JavaScript

```js
/**
 * Подключаем модуль работы с подписями
 * Для фронтенда используйте любой другой удобный
 * способ подключения библиотеки `eosjs-ecc`
 */
const ecc = require("eosjs-ecc");

/**
 * Устанавливаем имя пользователя
 */
const user = "destroyer2k";

/**
 * Устанавливаем приватный ключ пользователя
 */
const privateKey = "PRIVATE_KEY";

/**
 * Функция отправки и обработки сообщений через websocket здесь будет опущена
 * Предполагается что она может отправлять RPC-запросы с параметрами
 * и возвращать результат не синхронного ответа сервера
 */
async function send(method, params) {}

// Обертка для того чтобы иметь возможность использовать await
(async () => {
  /**
   * Получаем секретный ключ отправив на сервер по сокету вызов метода `auth.generateSecret`
   * Сохраняем полученный ответ в переменную
   */
  const secretData = await send("auth.generateSecret");

  /**
   * Сервер может вернуть RPC-ошибку, обрабатываем её тут
   */
  if (secretData.error) {
    throw secretData.error;
  }

  /**
   * Получаем из RPC-ответа поле `secret` с секретной строкой сервера
   */
  const secret = secretData.result.secret;

  /**
   * Подписываем секретную строку с сервера приватным ключем пользователя
   * используя библиотеку `eosjs-ecc`
   */
  const sign = ecc.Signature.sign(secret, privateKey).toString();

  /**
   * Отправляем имя пользователя и подпись
   * Если всё сделано верно и приватный ключ действительно принадлежит
   * указанному пользователю - сервер вернет положительный ответ и
   * все дальнейшие действия через этот сокет будет определены
   * как действия указанного пользователя
   */
  await send("auth.authorize", { user, sign });
})();
```

---

#### `auth.generateSecret`

**Запрос ===>**

|      Процедура      | Авторизация  | Описание                                |
| :-----------------: | :----------: | --------------------------------------- |
| auth.generateSecret | Не требуется | Получить секрет авторизации для подписи |

| Параметры отсутствуют |
| :-------------------: |


Пример:

Получаем секрет для подписи

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "frame.getEmbed",
  "params": {}
}
```

**<=== Ответ**

| Параметр |  Тип   | Описание                         |
| :------: | :----: | :------------------------------- |
|  secret  | string | Секретная строка для авторизации |

**<=x= Ошибки**

| Код ошибки | Описание                |
| :--------: | :---------------------- |
|    1104    | Внутренняя ошибка связи |

---

#### `auth.authorize`

**Запрос ===>**

|   Процедура    | Авторизация  | Описание       |
| :------------: | :----------: | -------------- |
| auth.authorize | Не требуется | Авторизоваться |

| Параметр |  Тип   | Обяз. | Описание             |
| :------: | :----: | :---: | -------------------- |
|   user   | string |  Да   | Имя пользователя     |
|   sign   | string |  Да   | Подпись пользователя |

Пример:

Авторизоваться пользователем `destroyer2k` через подпись приватным ключем

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "frame.getEmbed",
  "params": {
    "user": "destroyer2k",
    "sign": "DfalkjafLasfjklASDflhjlpqlkjaASDFlhkfadljklLAsfhl"
  }
}
```

**<=== Ответ**

| Параметр |  Тип   | Варианты | Описание            |
| :------: | :----: | :------: | :------------------ |
|  status  | string |    OK    | Сообщение об успехе |

**<=x= Ошибки**

| Код ошибки | Описание                                               |
| :--------: | :----------------------------------------------------- |
|    1102    | Доступ запрещен, не валидный формат данных авторизации |
|    1103    | Доступ запрещен, блокчейн отверг авторизацию           |
|    1104    | Внутренняя ошибка связи                                |

---

### Регистрация

Регистрация предоставляет возможность зарегистрировать пользователя используюя различные стратегии
регистрации. Стратегию регистрации выбирает сервер. В любой момент времени можно получить текущий шаг
регистрации пользователя, что позволяет прерывать процесс регистрации на необходимое время. Однако,
стоит учесть что существуют лимиты времени на ожидание продолжения регистрации, после их истечения
пользователь удаляется из базы предварительной регистрации, что высвобождает занятое имя и регистрацию
под указанным именем можно инициировать снова.

---

#### `registration.getState`

**Запрос ===>**

|       Процедура       | Авторизация  | Описание                                  |
| :-------------------: | :----------: | ----------------------------------------- |
| registration.getState | Не требуется | Получить шаг регистрации для пользователя |

| Параметр |  Тип   | Обяз. | Описание         |
| :------: | :----: | :---: | ---------------- |
|   user   | string |  Да   | Имя пользователя |

Пример:

Получаем состояние регистрации для пользователя

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "registration.getState",
  "params": {
    "user": "destroyer2k"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `registration.firstStep`

**Запрос ===>**

|       Процедура        | Авторизация  | Описание                        |
| :--------------------: | :----------: | ------------------------------- |
| registration.firstStep | Не требуется | Сделать первый шаг регистрациия |

| Параметр |  Тип   |      Обяз.       | Описание                  |
| :------: | :----: | :--------------: | ------------------------- |
|   user   | string |        Да        | Имя пользователя          |
|  phone   | string |        Да        | Телефон пользователя      |
|   mail   | string |        Да        | Почта пользователя        |
| captcha  | string | Публичный сервер | Верификационный код капчи |

Пример:

Запускаем первый шаг регистрации

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "registration.firstStep",
  "params": {
    "user": "destroyer2k",
    "phone": "5555555",
    "mail": "user@site.com",
    "captcha": "dEdOdpabEsiboD4z"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `registration.verify`

**Запрос ===>**

|      Процедура      | Авторизация  | Применимость        | Описание                        |
| :-----------------: | :----------: | ------------------- | ------------------------------- |
| registration.verify | Не требуется | Стратегия smsToUser | Сделать верификацию регистрации |

| Параметр |       Тип       | Обяз. | Описание         |
| :------: | :-------------: | :---: | ---------------- |
|   user   |     string      |  Да   | Имя пользователя |
|   code   | string / number |  Да   | Код из смс       |

Пример:

Верифицируем код пользователя из CMC

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "registration.verify",
  "params": {
    "user": "destroyer2k",
    "code": 4682
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `registration.toBlockChain`

**Запрос ===>**

|         Процедура         | Авторизация  | Описание                                  |
| :-----------------------: | :----------: | ----------------------------------------- |
| registration.toBlockChain | Не требуется | Зарегистрировать пользователя в блокчейне |

| Параметр |  Тип   | Обяз. | Описание                 |
| :------: | :----: | :---: | ------------------------ |
|   user   | string |  Да   | Имя пользователя         |
|  owner   | string |  Да   | Ключ владельца           |
|  active  | string |  Да   | Активный ключ            |
| posting  | string |  Да   | Постинг ключ             |
|   memo   | string |  Да   | Мемо ключ (ключ заметок) |

Пример:

Регистрируем пользователя непосредственно в блокчейне

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "registration.toBlockChain",
  "params": {
    "user": "destroyer2k",
    "owner": "SkdoEpqdDldinm",
    "active": "dfoekDfoakeiE",
    "posting": "piqkEldioldoke",
    "memo": "oPqiamjklEoEEa"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `registration.changePhone`

**Запрос ===>**

|        Процедура         | Авторизация  | Применимость                     | Описание               |
| :----------------------: | :----------: | -------------------------------- | ---------------------- |
| registration.changePhone | Не требуется | Стратегия smsFromUser, smsToUser | Сменить номер телефона |

| Параметр |  Тип   |      Обяз.       | Описание                  |
| :------: | :----: | :--------------: | ------------------------- |
|   user   | string |        Да        | Имя пользователя          |
|  phone   | string |        Да        | Телефон пользователя      |
| captcha  | string | Публичный сервер | Верификационный код капчи |

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

Пример:

Меняем телефон пользователя на новый

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "registration.changePhone",
  "params": {
    "user": "destroyer2k",
    "phone": "5555566",
    "captcha": "dlkEdlsIpqpkaZdkl"
  }
}
```

---

#### `registration.resendSmsCode`

**Запрос ===>**

|         Процедура          | Авторизация  | Применимость        | Описание                                  |
| :------------------------: | :----------: | ------------------- | ----------------------------------------- |
| registration.resendSmsCode | Не требуется | Стратегия smsToUser | Переотправить код на телефон пользователя |

| Параметр |  Тип   |     Обяз.      | Описание             |
| :------: | :----: | :------------: | -------------------- |
|   user   | string | Если нет phone | Имя пользователя     |
|  phone   | string | Если нет user  | Телефон пользователя |

Пример:

Отправка смс на телефон пользователя повторно

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "registration.resendSmsCode",
  "params": {
    "user": "destroyer2k",
    "phone": "55555555"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `registration.subscribeOnSmsGet`

**Запрос ===>**

|           Процедура            | Авторизация  | Применимость          | Описание                                     |
| :----------------------------: | :----------: | --------------------- | -------------------------------------------- |
| registration.subscribeOnSmsGet | Не требуется | Стратегия smsFromUser | Подписаться на получение смс от пользователя |

| Параметр |  Тип   |     Обяз.      | Описание             |
| :------: | :----: | :------------: | -------------------- |
|   user   | string | Если нет phone | Имя пользователя     |
|  phone   | string | Если нет user  | Телефон пользователя |

Пример:

Подписка на факт получение смс от пользователя

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "registration.subscribeOnSmsGet",
  "params": {
    "user": "destroyer2k",
    "phone": "55555555"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

### Настройки пользователя

Настройки пользователя представляют частично структурированное хранилище не критичных настроек
пользователя, таких как язык интерфейса, предпочитаемая отображаемая валюта, оповещение о каких-либо
комментариях и подобное.

При этом подразумевается 3 типа настроек:

- notify - хранилище настроек web-нотификаций
- push - хранилище настроек mobile-нотификаций
- basic - хранилище иных неструктурированных настроек

---

#### `options.get`

**Запрос ===>**

|  Процедура  | Авторизация | Описание                        |
| :---------: | :---------: | ------------------------------- |
| options.get |  Требуется  | Получить настройки пользователя |

| Параметр |  Тип   | Обяз. | Описание                                                                                                                                                                                                                           |
| :------: | :----: | :---: | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| profile  | string |  Да   | Произвольная строка - например идентификатор устройства, класса устройств или иной произвольный идентификатор клиента, например для Android-телефонов это может быть идентификатор устройства, а для браузеров просто строка `web` |

Пример:

Получаем настройки текущего авторизованного пользователя по профилю `browser`

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "options.get",
  "params": {
    "profile": "browser"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `options.set`

**Запрос ===>**

|  Процедура  | Авторизация | Описание                         |
| :---------: | :---------: | -------------------------------- |
| options.set |  Требуется  | Сохранить настройки пользователя |

| Параметр | **\_** |      **\_**       | Варианты | По умолч. |   Тип   | Обяз. | Описание                                                                                                                                                                                                                                                                                                |
| :------: | :----: | :---------------: | :------: | :-------: | :-----: | :---: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| profile  |        |                   |          |           | string  |  Да   | Произвольная строка - например идентификатор устройства, класса устройств или иной произвольный идентификатор клиента, например для Android-телефонов это может быть идентификатор устройства, а для браузеров просто строка `web`                                                                      |
|  basic   |        |                   |          |           | object  |  Нет  | Произвольный JSON-объект данных, который будет присоединен к существующим данным слиянием по ключам - измения затронут только те ключи существующих данных что находятся в JSON-объекте, произойдет их полная замена на новые данные, остальные данные по другим ключам затронуты не будут              |
|  notify  |        |                   |          |           | object  |  Нет  | JSON-объект настроек web-нотификаций                                                                                                                                                                                                                                                                    |
|          |  show  |                   |          |           | object  |  Нет  | JSON-объект настроек отображения нотификаций, который будет присоединен к существующим данным слиянием по ключам - измения затронут только те ключи существующих данных что находятся в JSON-объекте, произойдет их полная замена на новые данные, остальные данные по другим ключам затронуты не будут |
|          |        |      upvote       |          |           | boolean |  Нет  | Оповещения о лайке (голосе за)                                                                                                                                                                                                                                                                          |
|          |        |     downvote      |          |           | boolean |  Нет  | Оповещения о дизлайке (голосе против)                                                                                                                                                                                                                                                                   |
|          |        |     transfer      |          |           | boolean |  Нет  | Оповещения о переводе средств                                                                                                                                                                                                                                                                           |
|          |        |       reply       |          |           | boolean |  Нет  | Оповещение об ответе на пост/комментарий                                                                                                                                                                                                                                                                |
|          |        |     subscribe     |          |           | boolean |  Нет  | Оповещение о подписке                                                                                                                                                                                                                                                                                   |
|          |        |    unsubscribe    |          |           | boolean |  Нет  | Оповещение об отписке                                                                                                                                                                                                                                                                                   |
|          |        |      mention      |          |           | boolean |  Нет  | Оповещение об упоминании в посте/комментарии                                                                                                                                                                                                                                                            |
|          |        |      repost       |          |           | boolean |  Нет  | Оповещение о репосте                                                                                                                                                                                                                                                                                    |
|          |        |      reward       |          |           | boolean |  Нет  | Оповещение о награде за пост/комментарий                                                                                                                                                                                                                                                                |
|          |        |   curatorReward   |          |           | boolean |  Нет  | Оповещение о награде за устаноку лайка за пост/комментарий                                                                                                                                                                                                                                              |
|          |        |      message      |          |           | boolean |  Нет  | Оповещение о личном сообщении через блокчейн                                                                                                                                                                                                                                                            |
|          |        |    witnessVote    |          |           | boolean |  Нет  | Оповещение об установке голосова другим пользователем за делегатство текущего                                                                                                                                                                                                                           |
|          |        | witnessCancelVote |          |           | boolean |  Нет  | Оповещение о снятии голоса другим пользователем за делегатство текущего                                                                                                                                                                                                                                 |
|   push   |        |                   |          |           | object  |  Нет  | JSON-объект настроек mobile-нотификаций                                                                                                                                                                                                                                                                 |
|          |  show  |                   |          |           | object  |  Нет  | JSON-объект настроек отображения нотификаций, который будет присоединен к существующим данным слиянием по ключам - измения затронут только те ключи существующих данных что находятся в JSON-объекте, произойдет их полная замена на новые данные, остальные данные по другим ключам затронуты не будут |
|          |        |      upvote       |          |           | boolean |  Нет  | Оповещения о лайке (голосе за)                                                                                                                                                                                                                                                                          |
|          |        |     downvote      |          |           | boolean |  Нет  | Оповещения о дизлайке (голосе против)                                                                                                                                                                                                                                                                   |
|          |        |     transfer      |          |           | boolean |  Нет  | Оповещения о переводе средств                                                                                                                                                                                                                                                                           |
|          |        |       reply       |          |           | boolean |  Нет  | Оповещение об ответе на пост/комментарий                                                                                                                                                                                                                                                                |
|          |        |     subscribe     |          |           | boolean |  Нет  | Оповещение о подписке                                                                                                                                                                                                                                                                                   |
|          |        |    unsubscribe    |          |           | boolean |  Нет  | Оповещение об отписке                                                                                                                                                                                                                                                                                   |
|          |        |      mention      |          |           | boolean |  Нет  | Оповещение об упоминании в посте/комментарии                                                                                                                                                                                                                                                            |
|          |        |      repost       |          |           | boolean |  Нет  | Оповещение о репосте                                                                                                                                                                                                                                                                                    |
|          |        |      reward       |          |           | boolean |  Нет  | Оповещение о награде за пост/комментарий                                                                                                                                                                                                                                                                |
|          |        |   curatorReward   |          |           | boolean |  Нет  | Оповещение о награде за устаноку лайка за пост/комментарий                                                                                                                                                                                                                                              |
|          |        |      message      |          |           | boolean |  Нет  | Оповещение о личном сообщении через блокчейн                                                                                                                                                                                                                                                            |
|          |        |    witnessVote    |          |           | boolean |  Нет  | Оповещение об установке голосова другим пользователем за делегатство текущего                                                                                                                                                                                                                           |
|          |        | witnessCancelVote |          |           | boolean |  Нет  | Оповещение о снятии голоса другим пользователем за делегатство текущего                                                                                                                                                                                                                                 |
|          |  lang  |                   |          |    ru     | string  |  Нет  | Язык рассылаемых уведомлений                                                                                                                                                                                                                                                                            |
|          |        |                   |    ru    |           | string  |  Нет  | Русский язык                                                                                                                                                                                                                                                                                            |
|          |        |                   |    en    |           | string  |  Нет  | Английский язык                                                                                                                                                                                                                                                                                         |

Пример:

Меняем настройки рассылки для web-нотификаций - включаем отображение лайков и отключаем дизлайков

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "options.set",
  "params": {
    "profile": "aFiclsSPkdshg",
    "notify": {
      "show": {
        "upvote": true,
        "downvote": false
      }
    }
  }
}
```

Включаем отображение репостов на мобильных устройствах, при этом отключаем их для web-нотификаций

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "options.set",
  "params": {
    "profile": "doskEsfdlnkl",
    "push": {
      "show": {
        "repost": true
      }
    },
    "notify": {
      "show": {
        "repost": false
      }
    }
  }
}
```

Установка предпочитаемой валюты отображения на `USD`, а языка мобильных оповещений на английский

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "options.set",
  "params": {
    "profile": "odslkhYslkd",
    "basic": {
      "currency": "USD"
    },
    "push": {
      "lang": "en"
    }
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

### Онлайн-нотификации с учетом настроек (WebSocket)

Имеется возможность работать с нотификациями о каких-либо событиях, рассылаемых с сервера на клиент
через WebSocket, достаточно лишь вызвать метод подписывающий текущий коннект на их получение.
Имеется возможность включать и отключать нотификации по их типам, однако раздельные профили с разными
настройками не поддерживаются. В случае подключения одного пользователя с нескольких
WebSocket-соединений - все коннекты получат сообщения.

---

#### `onlineNotify.on`

**Запрос ===>**

|    Процедура    | Авторизация | Описание                                                                                                                                                                                                           |
| :-------------: | :---------: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| onlineNotify.on |  Требуется  | Подписка на рассылку нотификаций о событиях для пользователя, сервер будет присылать их по вебсокету по факту их появления для этого пользователя, можно подписываться с разных устройств и браузеров одновременно |

| Параметры отсутствуют |
| :-------------------: |


Пример:

Подписываемся на рассылку нотификаций с сервера

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "onlineNotify.on",
  "params": {}
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `onlineNotify.off`

**Запрос ===>**

|    Процедура     | Авторизация | Описание                                                                                                 |
| :--------------: | :---------: | -------------------------------------------------------------------------------------------------------- |
| onlineNotify.off |  Требуется  | Отписка от рассылки нотификаций о событиях для пользователя, сервер перестанет присылать их по вебсокету |

| Параметры отсутствуют |
| :-------------------: |


Пример:

Отписываемся от рассылки нотификаций с сервера

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "onlineNotify.off",
  "params": {}
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `onlineNotify.history`

**Запрос ===>**

|      Процедура       | Авторизация | Описание                                                                |
| :------------------: | :---------: | ----------------------------------------------------------------------- |
| onlineNotify.history |  Требуется  | Получение истории нотификаций с учетом настроек пользователя о рассылке |

|   Параметр   | По умолч. |   Тип   | Обяз. | Описание                                        |
| :----------: | :-------: | :-----: | :---: | ----------------------------------------------- |
|    fromId    |           | string  |  Нет  | ID с которого нужно начать показывать историю   |
|    limit     |    10     | number  |  Нет  | Необходимое количество строк истории            |
| markAsViewed |   true    | boolean |  Нет  | Пометить все выгруженные записи как прочитанные |
|  freshOnly   |   false   | boolean |  Нет  | Возвратить только непрочитанные данные          |

Пример:

Получить 10 непрочитанных нотификаций, пометив их как прочитанные

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "onlineNotify.history",
  "params": {
    "freshOnly": true
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `onlineNotify.historyFresh`

**Запрос ===>**

|         Процедура         | Авторизация | Описание                                                                      |
| :-----------------------: | :---------: | ----------------------------------------------------------------------------- |
| onlineNotify.historyFresh |  Требуется  | Получение количества непрочитанных нотификаций с учетом настроек пользователя |

| Параметры отсутствуют |
| :-------------------: |


Пример:

Получаем количество непрочитанных нотификаций по их типам

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "onlineNotify.historyFresh",
  "params": {}
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

### Push-нотификации с учетом настроек (Push для мобильных устройств)

Имеется возможность работать с нотификациями о каких-либо событиях, рассылаемых с сервера на клиент
через Push-уведомления с необходимым языком сообщений, достаточно лишь вызвать метод подписывающий
push-ключ на их рассылку. Имеется возможность включать и отключать нотификации по их типам с поддержкой
разных профилей, что позволяет уникально настраивать каждое устройство по необходимости.

---

#### `push.notifyOn`

**Запрос ===>**

|   Процедура   | Авторизация | Описание                                                                                                                                                                                                  |
| :-----------: | :---------: | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| push.notifyOn |  Требуется  | Подписка на рассылку push-нотификаций о событиях для пользователя, можно подписываться с разных мобильных устройств одновременно, настройки рассылки персональны для каждого профиля у каждого устройства |

| Параметр |  Тип   | Обяз. | Описание                           |
| :------: | :----: | :---: | ---------------------------------- |
|   key    | string |  Да   | Ключ рассылки нотификации          |
| profile  | string |  Да   | Идентификатор профиля пользователя |

Пример:

Подписываемся на рассылку push-уведоблений на указанный push-ключ для профиля `awesome` текущего пользователя

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "push.notifyOn",
  "params": {
    "key": "AoaslADSkhnasdPlllkjasASDFlkjmasdflLAsfdjlk",
    "profile": "awesome"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `push.notifyOff`

**Запрос ===>**

|   Процедура    | Авторизация | Описание                                                                                                      |
| :------------: | :---------: | ------------------------------------------------------------------------------------------------------------- |
| push.notifyOff |  Требуется  | Отписка от рассылки push-нотификаций о событиях для пользователя для указанного профиля указанного устройства |

| Параметр |  Тип   | Обяз. | Описание                           |
| :------: | :----: | :---: | ---------------------------------- |
|   key    | string |  Да   | Ключ рассылки нотификации          |
| profile  | string |  Да   | Идентификатор профиля пользователя |

Пример:

Отписываемся от рассылок push-уведоблений на указанный push-ключ для профиля `awesome` текущего пользователя

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "push.notifyOff",
  "params": {
    "key": "AoaslADSkhnasdPlllkjasASDFlkjmasdflLAsfdjlk",
    "profile": "awesome"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `push.history`

**Запрос ===>**

|  Процедура   | Авторизация | Описание                                                                                                                                    |
| :----------: | :---------: | ------------------------------------------------------------------------------------------------------------------------------------------- |
| push.history |  Требуется  | Получение истории нотификаций с учетом настроек пользователя о рассылке, также можно получить историю только по указанным типам нотификаций |

|   Параметр   |     Варианты      | По умолч. |   Тип   | Обяз. | Описание                                                                                                                 |
| :----------: | :---------------: | :-------: | :-----: | :---: | :----------------------------------------------------------------------------------------------------------------------- |
|   profile    |                   |           | string  |  Да   | Профиль пользователя                                                                                                     |
|   afterId    |                   |           | string  |  Нет  | ID после которого нужно начать показывать историю                                                                        |
|    limit     |                   |    10     | number  |  Нет  | Необходимое количество строк истории                                                                                     |
| markAsViewed |                   |   true    | boolean |  Нет  | Пометить все выгруженные записи как прочитанные                                                                          |
|  freshOnly   |                   |   false   | boolean |  Нет  | Возвратить только непрочитанные данные                                                                                   |
|    types     |                   |    all    | string  |  Нет  | Массив необходимых типов нотификаций из которого будут вычтены те типы, которые пользователь отключил в своих настройках |
|              |        all        |           | string  |       | Попытаться получить все типы нотификаций                                                                                 |
|              |       vote        |           | string  |       | Попытаться получить лайки (голоса)                                                                                       |
|              |       flag        |           | string  |       | Попытаться получить дизлайки (флаги)                                                                                     |
|              |     transfer      |           | string  |       | Попытаться получить переводы                                                                                             |
|              |       reply       |           | string  |       | Попытаться получить ответы                                                                                               |
|              |     subscribe     |           | string  |       | Попытаться получить подписки                                                                                             |
|              |    unsubscribe    |           | string  |       | Попытаться получить отписки                                                                                              |
|              |      mention      |           | string  |       | Попытаться получить упоминания                                                                                           |
|              |      repost       |           | string  |       | Попытаться получить репосты                                                                                              |
|              |      reward       |           | string  |       | Попытаться получить авторские награды                                                                                    |
|              |   curatorReward   |           | string  |       | Попытаться получить кураторские награды                                                                                  |
|              |      message      |           | string  |       | Попытаться получить сообщения                                                                                            |
|              |    witnessVote    |           | string  |       | Попытаться получить голоса за делегатство                                                                                |
|              | witnessCancelVote |           | string  |       | Попытаться получить снятие голосов за делегатство                                                                        |

Пример:

Получить лайки и репосты, при этом они будут возвращены только если пользователь не отключил их в настройках

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "push.history",
  "params": {
    "profile": "awesome",
    "types": ["vote", "repost"]
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `push.historyFresh`

**Запрос ===>**

|     Процедура     | Авторизация | Описание                                                                                              |
| :---------------: | :---------: | ----------------------------------------------------------------------------------------------------- |
| push.historyFresh |  Требуется  | Получение количества непрочитанных нотификаций с учетом настроек пользователя для конкретного профиля |

| Параметр |  Тип   | Обяз. | Описание                           |
| :------: | :----: | :---: | ---------------------------------- |
| profile  | string |  Да   | Идентификатор профиля пользователя |

Пример:

Получаем количество непрочитанных нотификаций для профиля `awesome` текущего пользователя

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "push.historyFresh",
  "params": {
    "profile": "awesome"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

### Нотификации пользователя и черные списки

Система нотификаций занимается рассылкой нотификаций пользователям о различных событиях, которые
происходят в системе и которые касаются лично их. Текущая секция апи предоставляет доступ
к истории нотификаций, а также к работе с черными списками. История нотификаций отдается без
учета настроек пользователя т.к. они зависят от типа подписки на рассылку, данные с фильтрацией
по настройкам содержатся в соответствующих разделах.

Нотификации в истории имеют два особых свойства - просмотренность и прочитанность.
Предполагается что просмотренность возникает когда пользователь физически увидел нотификацию,
а прочитанность - когда он открыл её чтобы посмотреть детальнее. Аналогичное поведение
существует во многих соц-сетях и на многих сайтах. Однако, апи не указывает как именно
необходимо использовать эти два свойства, а лишь дает возможность с ними работать, помечая
или снимая нужные пометки, явным и автоматическим способами.

---

#### `notify.getHistory`

**Запрос ===>**

|     Процедура     | Авторизация | Описание                                                |
| :---------------: | :---------: | ------------------------------------------------------- |
| notify.getHistory |  Требуется  | Получение истории нотификаций для текущего пользователя |

|   Параметр   |     Варианты      | По умолч. |   Тип   | Обяз. | Описание                                          |
| :----------: | :---------------: | :-------: | :-----: | :---: | :------------------------------------------------ |
|    fromId    |                   |           | string  |  Нет  | ID c которого нужно начать показывать историю     |
|    limit     |                   |    10     | number  |  Нет  | Необходимое количество строк истории              |
| markAsViewed |                   |   true    | boolean |  Нет  | Пометить все выгруженные записи как просмотренные |
|  freshOnly   |                   |   false   | boolean |  Нет  | Возвратить только непросмотренные нотификации     |
|    types     |                   |    all    | string  |  Нет  | Массив необходимых типов нотификаций              |
|              |        all        |           | string  |       | Получить все типы нотификаций                     |
|              |       vote        |           | string  |       | Получить лайки (голоса)                           |
|              |       flag        |           | string  |       | Получить дизлайки (флаги)                         |
|              |     transfer      |           | string  |       | Получить переводы                                 |
|              |       reply       |           | string  |       | Получить ответы                                   |
|              |     subscribe     |           | string  |       | Получить подписки                                 |
|              |    unsubscribe    |           | string  |       | Получить отписки                                  |
|              |      mention      |           | string  |       | Получить упоминания                               |
|              |      repost       |           | string  |       | Получить репосты                                  |
|              |      reward       |           | string  |       | Получить авторские награды                        |
|              |   curatorReward   |           | string  |       | Получить кураторские награды                      |
|              |      message      |           | string  |       | Получить сообщения                                |
|              |    witnessVote    |           | string  |       | Получить голоса за делегатство                    |
|              | witnessCancelVote |           | string  |       | Получить снятие голосов за делегатство            |

Пример:

Получить историю всех нотификаций, но не помечать их просмотренными

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "notify.getHistory",
  "params": {
    "markAsViewed": false
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `notify.getHistoryFresh`

**Запрос ===>**

|       Процедура        | Авторизация | Описание                                         |
| :--------------------: | :---------: | ------------------------------------------------ |
| notify.getHistoryFresh |  Требуется  | Получение количества непросмотренных нотификаций |

| Параметры отсутствуют |
| :-------------------: |


Пример:

Получаем количество непросмотренных нотификаций по их типам

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "notify.getHistoryFresh",
  "params": {}
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `notify.markAsViewed`

**Запрос ===>**

|      Процедура      | Авторизация | Описание                                        |
| :-----------------: | :---------: | ----------------------------------------------- |
| notify.markAsViewed |  Требуется  | Пометка указанных нотификаций как просмотренных |

| Параметр |   Тип    | Обяз. | Описание                           |
| :------: | :------: | :---: | ---------------------------------- |
|   ids    | string[] |  Да   | Список идентификаторов для пометки |

Пример:

Помечаем три указанные нотификации как просмотренные

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "notify.markAsViewed",
  "params": {
    "ids": ["pdasLdsafd", "lkILOslisall", "lsOEllpplS"]
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `notify.markAllAsViewed`

**Запрос ===>**

|       Процедура        | Авторизация | Описание                                                |
| :--------------------: | :---------: | ------------------------------------------------------- |
| notify.markAllAsViewed |  Требуется  | Пометка всех нотификаций пользователя как просмотренные |

| Параметры отсутствуют |
| :-------------------: |


Пример:

Помечаем все нотификации пользователя как просмотренные

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "notify.markAllAsViewed",
  "params": {}
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `notify.markAsRead`

**Запрос ===>**

|     Процедура     | Авторизация | Описание                                      |
| :---------------: | :---------: | --------------------------------------------- |
| notify.markAsRead |  Требуется  | Пометка указанных нотификаций как прочитанных |

| Параметр |   Тип    | Обяз. | Описание                           |
| :------: | :------: | :---: | ---------------------------------- |
|   ids    | string[] |  Да   | Список идентификаторов для пометки |

Пример:

Помечаем три указанные нотификации как прочитанные

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "notify.markAsRead",
  "params": {
    "ids": ["pdasLdsafd", "lkILOslisall", "lsOEllpplS"]
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `notify.markAllAsRead`

**Запрос ===>**

|      Процедура       | Авторизация | Описание                                              |
| :------------------: | :---------: | ----------------------------------------------------- |
| notify.markAllAsRead |  Требуется  | Пометка всех нотификаций пользователя как прочитанные |

| Параметры отсутствуют |
| :-------------------: |


Пример:

Помечаем все нотификации пользователя как прочитанные

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "notify.markAllAsRead",
  "params": {}
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `notify.getBlackList`

**Запрос ===>**

|      Процедура      | Авторизация | Описание                                                                                                       |
| :-----------------: | :---------: | -------------------------------------------------------------------------------------------------------------- |
| notify.getBlackList |  Требуется  | Получение черного списка пользователя, список содержит пользователей от которых рассылка нотификаций запрещена |

| Параметры отсутствуют |
| :-------------------: |


Пример:

Получаем черный список пользователя

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "notify.getBlackList",
  "params": {}
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `notify.addToBlackList`

**Запрос ===>**

|       Процедура       | Авторизация | Описание                                                                                                         |
| :-------------------: | :---------: | ---------------------------------------------------------------------------------------------------------------- |
| notify.addToBlackList |  Требуется  | Добавление пользователя в черный список, список содержит пользователей от которых рассылка нотификаций запрещена |

| Параметр |  Тип   | Обяз. | Описание                                        |
| :------: | :----: | :---: | ----------------------------------------------- |
|  banned  | string |  Да   | Имя пользователя для добавления в черный список |

Пример:

Добавляем пользователя в черный список

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "notify.addToBlackList",
  "params": {
    "banned": "destroyer2k"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `notify.removeFromBlackList`

**Запрос ===>**

|         Процедура          | Авторизация | Описание                                                                                                         |
| :------------------------: | :---------: | ---------------------------------------------------------------------------------------------------------------- |
| notify.removeFromBlackList |  Требуется  | Удаление пользователя из черного списка, список содержит пользователей от которых рассылка нотификаций запрещена |

| Параметр |  Тип   | Обяз. | Описание                                          |
| :------: | :----: | :---: | ------------------------------------------------- |
|  banned  | string |  Да   | Имя пользователя для исключения из черного списка |

Пример:

Удаляем пользователя из черного списка

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "notify.removeFromBlackList",
  "params": {
    "banned": "destroyer2k"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

### Избранное

Апи предоставляет работу с избранным - контентом, который как-либо может быть помечен пользователем
как избранный для него контент.

---

#### `favorites.get`

**Запрос ===>**

|   Процедура   | Авторизация | Описание                              |
| :-----------: | :---------: | ------------------------------------- |
| favorites.get |  Требуется  | Получить избранные посты пользователя |

| Параметры отсутствуют |
| :-------------------: |


Пример:

Получаем список постов, которые пользователь добавил в избранное

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "favorites.get",
  "params": {}
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `favorites.add`

**Запрос ===>**

|   Процедура   | Авторизация | Описание                  |
| :-----------: | :---------: | ------------------------- |
| favorites.add |  Требуется  | Добавить пост в избранные |

| Параметр |  Тип   | Обяз. | Описание       |
| :------: | :----: | :---: | -------------- |
| permlink | string |  Да   | Пермлинк поста |

Пример:

Добавляем пост в избранное

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "favorites.add",
  "params": {
    "permlink": "myPostPermlink"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `favorites.remove`

**Запрос ===>**

|    Процедура     | Авторизация | Описание                  |
| :--------------: | :---------: | ------------------------- |
| favorites.remove |  Требуется  | Удалить пост из избранных |

| Параметр |  Тип   | Обяз. | Описание       |
| :------: | :----: | :---: | -------------- |
| permlink | string |  Да   | Пермлинк поста |

Пример:

Удаляем пост из избранного

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "favorites.remove",
  "params": {
    "permlink": "myPostPermlink"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

### Мета-данные

Апи позволяет работать с мета-данными пользователя - это такой класс данных,
который как-либо описывает пользователя, его состояние и представляет его данные,
но именно те, которые он, по бизнес-логике, не может менять явно, но может
менять своими действиями. Например - сохраняется тот факт что пользователь
сейчас онлайн. Данные которые пользователь, по бизнес-логике, должен менять
явным образом - обрабатываются другим апи.

---

#### `meta.markUserOnline`

**Запрос ===>**

|      Процедура      | Авторизация | Описание                  |
| :-----------------: | :---------: | ------------------------- |
| meta.markUserOnline |  Требуется  | Пометить юзера как онлайн |

| Параметры отсутствуют |
| :-------------------: |


Пример:

Помечаем пользователя как онлайн

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "meta.markUserOnline",
  "params": {}
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `meta.recordPostView`

**Запрос ===>**

|      Процедура      | Авторизация  | Описание                                                                                                         |
| :-----------------: | :----------: | ---------------------------------------------------------------------------------------------------------------- |
| meta.recordPostView | Не требуется | Запись факта просмотра поста, просмотр может быть учтен или не учтен в зависимости от проверки системы валидации |

|  Параметр   |  Тип   | Обяз. | Описание                                |
| :---------: | :----: | :---: | --------------------------------------- |
|  postLink   | string |  Да   | Полная ссылка на пост (author/permlink) |
| fingerPrint | string |  Да   | Finger-print браузера                   |

Пример:

Учитываем просмотр поста по полной ссылке

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "meta.recordPostView",
  "params": {
    "postLink": "destroyer2k/myPostPermlink",
    "fingerPrint": "ASOiLkjmlhAEWEDf"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `meta.getPostsViewCount`

**Запрос ===>**

|       Процедура        | Авторизация  | Описание                                            |
| :--------------------: | :----------: | --------------------------------------------------- |
| meta.getPostsViewCount | Не требуется | Получить количество просмотров указанных для постов |

| Параметр  |   Тип    | Обяз. | Описание                                                  |
| :-------: | :------: | :---: | --------------------------------------------------------- |
| postLinks | string[] |  Да   | Список ссылок на посты в полном формате (author/permlink) |

Пример:

Получаем количество просмотров для двух указанных постов

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "meta.getPostsViewCount",
  "params": {
    "postLink": [
      "destroyer2k/myPostPermlink",
      "destroyer2k/myAnotherPostPermlink"
    ]
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `meta.getUserLastOnline`

**Запрос ===>**

|       Процедура        | Авторизация  | Описание                                                    |
| :--------------------: | :----------: | ----------------------------------------------------------- |
| meta.getUserLastOnline | Не требуется | Получить время (timestamp) последного онлайна пользователей |

| Параметр |  Тип   | Обяз. | Описание         |
| :------: | :----: | :---: | ---------------- |
|   user   | string |  Да   | Имя пользователя |

Пример:

Получаем время последнего онлайда для пользователя `destroyer2k`

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "meta.getUserLastOnline",
  "params": {
    "user": "destroyer2k"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

### Курсы валют

Апи предоставляет возможность получить актуальные курсы валют относительно валют CyberWay.

---

#### `rates.getActual`

**Запрос ===>**

|    Процедура    | Авторизация  | Описание                         |
| :-------------: | :----------: | -------------------------------- |
| rates.getActual | Не требуется | Получить актуальные курсы обмена |

| Параметры отсутствуют |
| :-------------------: |


Пример:

Получить текущие курсы валют

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "rates.getActual",
  "params": {}
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `rates.getHistorical`

**Запрос ===>**

|      Процедура      | Авторизация  | Описание                       |
| :-----------------: | :----------: | ------------------------------ |
| rates.getHistorical | Не требуется | Получить историю курсов обмена |

| Параметр |     Тип      | Обяз. | Описание         |
| :------: | :----------: | :---: | ---------------- |
|   date   | string(Date) |  Да   | Необходимая дата |

Пример:

Получить историю за необходимую дату

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "rates.getHistorical",
  "params": {
    "date": "2019-03-19T14:09:14.584Z"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `rates.getHistoricalMulti`

**Запрос ===>**

|        Процедура         | Авторизация  | Описание                                          |
| :----------------------: | :----------: | ------------------------------------------------- |
| rates.getHistoricalMulti | Не требуется | Получить историю курсов обмена для нескольких дат |

| Параметр |      Тип       | Обяз. | Описание               |
| :------: | :------------: | :---: | ---------------------- |
|  dates   | string(Date)[] |  Да   | Массив необходимых дат |

Пример:

Получить историю за несколько необходимых дат

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "rates.getHistoricalMulti",
  "params": {
    "dates": [
      "2019-03-10T14:09:14.584Z",
      "2019-03-12T14:09:14.584Z",
      "2019-03-18T14:09:14.584Z"
    ]
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

--

### Контент и ленты

Эта секция апи предоставляет доступ к контенту, публикуемому через CyberWay.
Контент может быть получен как по идентификатору, так и в виде лент с многочисленными
видами фильтраций и ранжирования.

---

#### `content.getProfile`

**Запрос ===>**

|     Процедура      | Авторизация  | Описание                       |
| :----------------: | :----------: | ------------------------------ |
| content.getProfile | Не требуется | Получение профиля пользователя |

| Параметр |  Тип   |   Обяз.   | По умолч. | Варианты | Описание                   |
| :------: | :----: | :-------: | :-------: | :------: | :------------------------- |
|  userId  | string | !username |           |          | Идентификатор пользователя |
| username | string |  !userId  |           |          | Имя-алиас пользователя     |
|   app    | string |    Нет    |   cyber   |          | Тип приложения             |
|          | string |           |           |  cyber   | CyberWay                   |
|          | string |           |           |   gls    | Golos                      |
| ~~type~~ | string |    Нет    |   cyber   |          | Тип профиля (устарело)     |
|          | string |           |           |  cyber   | CyberWay                   |
|          | string |           |           |   gls    | Golos                      |

Пример:

Получить профиль пользователя `destroyer2k`

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "content.getProfile",
  "params": {
    "userId": "destroyer2k"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `content.getPost`

**Запрос ===>**

|    Процедура    | Авторизация  | Описание        |
| :-------------: | :----------: | --------------- |
| content.getPost | Не требуется | Получение поста |

|  Параметр   |  Тип   |   Обяз.   | По умолч. | Варианты | Описание                                   |
| :---------: | :----: | :-------: | :-------: | :------: | :----------------------------------------- |
|   userId    | string | !username |           |          | Идентификатор пользователя                 |
|  permlink   | string |    Да     |           |          | Пермлинк поста                             |
| contentType | string |    Нет    |    web    |          | Тип получаемого контента                   |
|             |        |           |           |   web    | Контент, пригодный для веб-клиентов        |
|             |        |           |           |  mobile  | Контент, пригодный для мобильных устройств |
|             |        |           |           |   raw    | Сырой контент без обработки                |
|  username   | string |  !userId  |           |          | Имя-алиас пользователя                     |
|     app     | string |    Нет    |   cyber   |          | Тип приложения                             |
|             | string |           |           |  cyber   | CyberWay                                   |
|             | string |           |           |   gls    | Golos                                      |

Пример:

Получить пост, идентифицируемый указанными параметрами

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "content.getPost",
  "params": {
    "userId": "destroyer2k",
    "permlink": "myowncontent"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `content.getFeed`

**Запрос ===>**

|    Процедура    | Авторизация  | Описание               |
| :-------------: | :----------: | ---------------------- |
| content.getFeed | Не требуется | Получение ленты постов |

|  Параметр   |     Тип      |                     Обяз.                      | По умолч. |         Варианты         | Описание                                                                                   |
| :---------: | :----------: | :--------------------------------------------: | :-------: | :----------------------: | ------------------------------------------------------------------------------------------ |
|    type     |    string    |                      Нет                       | community |                          | Тип ленты                                                                                  |
|             |              |                                                |           |        community         | Лента комьюнити                                                                            |
|             |              |                                                |           |      subscriptions       | Лента подписок пользователя                                                                |
|             |              |                                                |           |          byUser          | Лента постов самого пользователя                                                           |
|   sortBy    |    string    |                      Нет                       |   time    |                          | Способ сортировки                                                                          |
|             |              |                                                |           |           time           | Сначала старые, потом новые                                                                |
|             |              |                                                |           |         timeDesc         | Сначала новые, потом старые                                                                |
|             |              |                                                |           | popular (type=community) | По популярности                                                                            |
|  timeframe  |    string    |        type=community и sortBy=popular         |    day    |                          | Область выборки сортировки                                                                 |
|             |              |                                                |           |           day            | За день                                                                                    |
|             |              |                                                |           |           week           | За неделю                                                                                  |
|             |              |                                                |           |          month           | За месяц                                                                                   |
|             |              |                                                |           |           year           | За год                                                                                     |
|             |              |                                                |           |           all            | За всё время                                                                               |
|             |              |                                                |           |        WilsonHot         | Aлгоритм Вилсона - актуальный контент сейчас                                               |
|             |              |                                                |           |      WilsonTrending      | Aлгоритм Вилсона - в целом популярный контент                                              |
| sequenceKey | string, null |                       Да                       |   null    |                          | Ключ пагинации с сервера для получения следующего списка данных, null вернет первый список |
|    limit    |    number    |                      Нет                       |    10     |                          | Количество необходимых постов                                                              |
|   userId    |    string    | type=subscriptions или type=byUser и !username |           |                          | Идентификатор пользователя                                                                 |
| communityId |    string    |                 type=community                 |           |                          | Идентификатор комьюнити                                                                    |
|    tags     |   string[]   |          type=community и sortBy=time          |           |                          | Теги для фильтрации                                                                        |
| contentType |    string    |                      Нет                       |    web    |                          | Тип получаемого контента                                                                   |
|             |              |                                                |           |           web            | Контент, пригодный для веб-клиентов                                                        |
|             |              |                                                |           |          mobile          | Контент, пригодный для мобильных устройств                                                 |
|             |              |                                                |           |           raw            | Сырой контент без обработки                                                                |
|  username   |    string    |                    !userId                     |           |                          | Имя-алиас пользователя                                                                     |
|     app     |    string    |                      Нет                       |   cyber   |                          | Тип приложения                                                                             |
|             |    string    |                                                |           |          cyber           | CyberWay                                                                                   |
|             |    string    |                                                |           |           gls            | Golos                                                                                      |

Пример:

Получить ленту популярного контента для комьюнити `gls`

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "content.getFeed",
  "params": {
    "sortBy": "popular",
    "communityId": "gls"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `content.getComment`

**Запрос ===>**

|     Процедура      | Авторизация  | Описание              |
| :----------------: | :----------: | --------------------- |
| content.getComment | Не требуется | Получение комментария |

|  Параметр   |  Тип   |   Обяз.   | По умолч. | Варианты | Описание                                   |
| :---------: | :----: | :-------: | :-------: | :------: | :----------------------------------------- |
|   userId    | string | !username |           |          | Идентификатор пользователя                 |
|  permlink   | string |    Да     |           |          | Пермлинк комментария                       |
| contentType | string |    Нет    |    web    |          | Тип получаемого контента                   |
|             |        |           |           |   web    | Контент, пригодный для веб-клиентов        |
|             |        |           |           |  mobile  | Контент, пригодный для мобильных устройств |
|             |        |           |           |   raw    | Сырой контент без обработки                |
|  username   | string |  !userId  |           |          | Имя-алиас пользователя                     |
|     app     | string |    Нет    |   cyber   |          | Тип приложения                             |
|             | string |           |           |  cyber   | CyberWay                                   |
|             | string |           |           |   gls    | Golos                                      |

Пример:

Получить комментарий, идентифицируемый указанными параметрами

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "content.getComment",
  "params": {
    "userId": "destroyer2k",
    "permlink": "re-myowncontent"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `content.getComments`

**Запрос ===>**

|      Процедура      | Авторизация  | Описание                     |
| :-----------------: | :----------: | ---------------------------- |
| content.getComments | Не требуется | Получение ленты комментариев |

|  Параметр   |     Тип      |   Обяз.   | По умолч. | Варианты | Описание                                                                                   |
| :---------: | :----------: | :-------: | :-------: | :------: | ------------------------------------------------------------------------------------------ |
|   sortBy    |    string    |    Нет    |   time    |          | Способ сортировки                                                                          |
|             |              |           |           |   time   | Сначала старые, потом новые                                                                |
|             |              |           |           | timeDesc | Сначала новые, потом старые                                                                |
| sequenceKey | string, null |    Да     |   null    |          | Ключ пагинации с сервера для получения следующего списка данных, null вернет первый список |
|    limit    |    number    |    Нет    |    10     |          | Количество необходимых комментариев                                                        |
|    type     |    string    |    Нет    |   post    |          | Тип ленты комментариев                                                                     |
|             |              |           |           |   post   | Получить комментарии для поста                                                             |
|             |              |           |           |   user   | Получить комментарии пользователя                                                          |
|             |              |           |           | replies  | Получить комментарии, которые были оставлены пользователю                                  |
|   userId    |    string    | !username |           |          | Идентификатор пользователя                                                                 |
|  permlink   |    string    | type=post |           |          | Пермлинк поста                                                                             |
| contentType |    string    |    Нет    |    web    |          | Тип получаемого контента                                                                   |
|             |              |           |           |   web    | Контент, пригодный для веб-клиентов                                                        |
|             |              |           |           |  mobile  | Контент, пригодный для мобильных устройств                                                 |
|             |              |           |           |   raw    | Сырой контент без обработки                                                                |
|  username   |    string    |  !userId  |           |          | Имя-алиас пользователя                                                                     |
|     app     |    string    |    Нет    |   cyber   |          | Тип приложения                                                                             |
|             |    string    |           |           |  cyber   | CyberWay                                                                                   |
|             |    string    |           |           |   gls    | Golos                                                                                      |

Пример:

Получить список комментариев для поста, идентифицируемого указанными параметрами

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "content.getComments",
  "params": {
    "userId": "destroyer2k",
    "permlink": "myowncontent"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `content.getHashTagTop`

**Запрос ===>**

|       Процедура       | Авторизация  | Описание                 |
| :-------------------: | :----------: | ------------------------ |
| content.getHashTagTop | Не требуется | Получение топа хеш-тегов |

|  Параметр   |     Тип      | Обяз. | По умолч. | Описание                                                                                   |
| :---------: | :----------: | :---: | :-------: | ------------------------------------------------------------------------------------------ |
| communityId |    string    |  Да   |           | Идентификатор комьюнити                                                                    |
|    limit    |    number    |  Нет  |    10     | Количество необходимых элементов                                                           |
| sequenceKey | string, null |  Да   |           | Ключ пагинации с сервера для получения следующего списка данных, null вернет первый список |

Пример:

Получить топовые теги для комьюнити `gls`

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "content.getHashTagTop",
  "params": {
    "communityId": "gls"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `content.getLeadersTop`

**Запрос ===>**

|       Процедура       | Авторизация  | Описание                          |
| :-------------------: | :----------: | --------------------------------- |
| content.getLeadersTop | Не требуется | Получение топа лидеров сообщества |

|  Параметр   |     Тип      | Обяз. | По умолч. | Варианты | Описание                                                                                   |
| :---------: | :----------: | :---: | :-------: | :------: | ------------------------------------------------------------------------------------------ |
| communityId |    string    |  Да   |           |          | Идентификатор комьюнити                                                                    |
|    limit    |    number    |  Нет  |    10     |          | Количество необходимых элементов                                                           |
| sequenceKey | string, null |  Да   |           |          | Ключ пагинации с сервера для получения следующего списка данных, null вернет первый список |
|     app     |    string    |  Да   |   cyber   |          | Тип приложения                                                                             |
|             |    string    |       |           |  cyber   | CyberWay                                                                                   |
|             |    string    |       |           |   gls    | Golos                                                                                      |

Пример:

Получить топ лидеров для комьюнити `gls`

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "content.getLeadersTop",
  "params": {
    "communityId": "gls"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `content.waitForBlock`

**Запрос ===>**

|      Процедура       | Авторизация  | Описание                                                                                            |
| :------------------: | :----------: | --------------------------------------------------------------------------------------------------- |
| content.waitForBlock | Не требуется | Дождаться и получить ответ когда система обработки и кеширования контента обработает указанный блок |

| Параметр |  Тип   | Обяз. | Описание    |
| :------: | :----: | :---: | ----------- |
| blockNum | number |  Да   | Номер блока |

Пример:

Дождаться обработки блока номер `10868`

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "content.waitForBlock",
  "params": {
    "blockNum": 10868
  }
}
```

**<=== Ответ**

| Параметр |  Тип   | Варианты | Описание           |
| :------: | :----: | :------: | :----------------- |
|  status  | string |    OK    | Блок был обработан |

**<=x= Ошибки**

_Не описаны..._

---

#### `content.getPostVotes`

**Запрос ===>**

|      Процедура       | Авторизация  | Описание                                                                        |
| :------------------: | :----------: | ------------------------------------------------------------------------------- |
| content.getPostVotes | Не требуется | Получение списка голосов за пост вместе с процентами использованной силы голоса |

| Параметр |  Тип   | Обяз. | Описание                   |
| :------: | :----: | :---: | -------------------------- |
|  userId  | string |  Да   | Идентификатор пользователя |
| permlink | string |  Да   | Пермлинк поста             |

Пример:

Получаем список голосов

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "content.getPostVotes",
  "params": {
    "userId": "destroyer2k",
    "permlink": "myowncontent"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `content.getCommentVotes`

**Запрос ===>**

|        Процедура        | Авторизация  | Описание                                                                           |
| :---------------------: | :----------: | ---------------------------------------------------------------------------------- |
| content.getCommentVotes | Не требуется | Получение списка голосов за коммент вместе с процентами использованной силы голоса |

| Параметр |  Тип   | Обяз. | Описание                   |
| :------: | :----: | :---: | -------------------------- |
|  userId  | string |  Да   | Идентификатор пользователя |
| permlink | string |  Да   | Пермлинк поста             |

Пример:

Получаем список голосов

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "content.getCommentVotes",
  "params": {
    "userId": "destroyer2k",
    "permlink": "re-myowncontent"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `content.resolveProfile`

**Запрос ===>**

|       Процедура        | Авторизация  | Описание                                                                                                                                                             |
| :--------------------: | :----------: | -------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| content.resolveProfile | Не требуется | Резолв глобального идентификатора пользователя (userId) и локального аватара для конкретного приложения по имени приложения и имени пользователя из этого приложения |

| Параметр |  Тип   | Обяз. | По умолч. | Варианты | Описание               |
| :------: | :----: | :---: | :-------: | :------: | ---------------------- |
| username | string |  Да   |           |          | Имя-алиас пользователя |
|   app    | string |  Да   |   cyber   |          | Тип приложения         |
|          | string |       |           |  cyber   | CyberWay               |
|          | string |       |           |   gls    | Golos                  |

Пример:

Резолвим глобальный userId и локальный аватар для пользователя `destroyer2k` из приложения `Golos`

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "content.resolveProfile",
  "params": {
    "username": "destroyer2k",
    "app": "gls"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `content.getSubscriptions`

**Запрос ===>**

|        Процедура         | Авторизация  | Описание                       |
| :----------------------: | :----------: | ------------------------------ |
| content.getSubscriptions | Не требуется | Получить подписки пользователя |

|  Параметр   |     Тип      | Обяз. | По умолч. | Варианты  | Описание                                                                                   |
| :---------: | :----------: | :---: | :-------: | :-------: | ------------------------------------------------------------------------------------------ |
|   userId    |    string    |  Да   |           |           | Идентификатор пользователя                                                                 |
|    limit    |    number    |  Нет  |    10     |           | Количество необходимых элементов                                                           |
|    type     |    string    |  Нет  |   user    |           | Тип подписки                                                                               |
|             |              |       |           |   user    | Подписки на пользователей                                                                  |
|             |              |       |           | community | Подписки на сообщества                                                                     |
| sequenceKey | string, null |  Да   |           |           | Ключ пагинации с сервера для получения следующего списка данных, null вернет первый список |
|     app     |    string    |  Нет  |   cyber   |           | Тип приложения                                                                             |
|             |    string    |       |           |   cyber   | CyberWay                                                                                   |
|             |    string    |       |           |    gls    | Golos                                                                                      |

Пример:

Получаем список подписок

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "content.getSubscriptions",
  "params": {
    "userId": "desdfsda"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `content.getSubscribers`

**Запрос ===>**

|       Процедура        | Авторизация  | Описание                          |
| :--------------------: | :----------: | --------------------------------- |
| content.getSubscribers | Не требуется | Получить подписчиков пользователя |

|  Параметр   |     Тип      | Обяз. | По умолч. | Варианты  | Описание                                                                                   |
| :---------: | :----------: | :---: | :-------: | :-------: | ------------------------------------------------------------------------------------------ |
|   userId    |    string    |  Да   |           |           | Идентификатор пользователя                                                                 |
|    limit    |    number    |  Нет  |    10     |           | Количество необходимых элементов                                                           |
|    type     |    string    |  Нет  |   user    |           | Тип подписки                                                                               |
|             |              |       |           |   user    | Подписчики-пользователи                                                                    |
|             |              |       |           | community | Подписчики-сообщества                                                                      |
| sequenceKey | string, null |  Да   |           |           | Ключ пагинации с сервера для получения следующего списка данных, null вернет первый список |
|     app     |    string    |  Нет  |   cyber   |           | Тип приложения                                                                             |
|             |    string    |       |           |   cyber   | CyberWay                                                                                   |
|             |    string    |       |           |    gls    | Golos                                                                                      |

Пример:

Получаем список подписчиков

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "content.getSubscribers",
  "params": {
    "userId": "desdfsda"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `content.waitForTransaction`

**Запрос ===>**

|         Процедура          | Авторизация  | Описание                                                                                                                                                                                                                                                 |
| :------------------------: | :----------: | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| content.waitForTransaction | Не требуется | Дождаться и получить ответ когда система обработки и кеширования контента обработает указанную транзакцию, система хранит обработанные транзакции ограниченное количество времени, слишком старые транзакции будут возвращены с ошибкой времени ожидания |

|   Параметр    |  Тип   | Обяз. | Описание                 |
| :-----------: | :----: | :---: | ------------------------ |
| transactionId | string |  Да   | Идентификатор транзакции |

Пример:

Дождаться обработки транзакции `OdklASkljlAQafdlkjEoljmasdfkD`

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "content.waitForTransaction",
  "params": {
    "transactionId": "OdklASkljlAQafdlkjEoljmasdfkD"
  }
}
```

**<=== Ответ**

| Параметр |  Тип   | Варианты | Описание                   |
| :------: | :----: | :------: | :------------------------- |
|  status  | string |    OK    | Транзакция была обработана |

**<=x= Ошибки**

_Не описаны..._

---

### Встроенный контент

Апи предполагает работу с встроенным контентом, например для отображения в редакторе поста до
момента непосредственной публикации.

---

#### `frame.getEmbed`

**Запрос ===>**

|   Процедура    | Авторизация  | Описание                                              |
| :------------: | :----------: | ----------------------------------------------------- |
| frame.getEmbed | Не требуется | Получить обработанные данные для встраивания контента |

| Параметр |  Тип   | Обяз. | По умолч. | Варианты | Описание                       |
| :------: | :----: | :---: | :-------: | :------: | ------------------------------ |
|   type   | string |  Да   |   _нет_   |          | Тип обработки                  |
|          |        |       |           |  oembed  | Обработать сервисом "oembed"   |
|          |        |       |           | iframely | Обработать сервисом "iframely" |
|   url    | string |  Да   |   _нет_   |          | Ссылка на контент              |

Пример:

Обработать и получить контент по ссылке `https://site.com/content` используя `oembed`

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "frame.getEmbed",
  "params": {
    "type": "oembed",
    "url": "https://site.com/content"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---
