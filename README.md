ВНИМАНИЕ - Документация в процессе доработки!
Актуальность апи от 06.03.

# Документация для работы с API сервисов CyberWay BackEnd

## Пояснения

#### Общая информация

Инфраструктура CyberWay состоит из 3х основных частей:

- CyberWay BlockChain
- CyberWay BackEnd
- CyberWay Client

Любой сайт, мобильное приложение или что-либо иное, общающееся с BlockChain и/или BackEnd относится к категории Client.

К BlockChain относятся блокчейн-ноды CyberWay и вспомогательные сервисы, подключаемые напрямую к блокчейн-ноде и
существующие вместе с ней, например EventEngine, который может отсутсвовать или присутствовать у каждой конкретной ноды,
но является лишь вспомогательной частью или утилитой и относится к категории BlockChain.

К категории BackEnd относятся разнообразные вспомогательные микросервисы, имеющие одну единую точку входа для каждого
набора запущенных микросервисов. Эта документация содержит описание общения именно с этими микросервисами через
единую точку входа и предполагает что за ней находятся и развернуты все необходимые микросервисы.

#### Формат запросов и ответов

Для того чтобы подключиться к системе необходимо создать WebSocket подключение к входной точке по установленному
эндпоинту подключения. Например - `wss://gate.site.com`.

Общение происходит по протоколу [JSON-RPC 2.0](https://www.jsonrpc.org/specification) с некоторыми более строгими
правилами:

- Параметры запроса должны только быть именованными, в виде JSON-объекта, безымянные не поддерживаются.
- Результат запроса в поле `result` всегда содержит JSON объект с результатом выполнения.
- В случае если результат запроса не предполагает конкретного ответа - в поле `result` всегда содержит JSON объект
  с данными `{"status": "OK"}` (без вариаций).
- В случае ошибки в поле `error` всегда содержится ответ формата `{"code": 123, "message": "Description text"}`,
  где `code` это цифровой код ошибки, описывающий тип проишествия, а `description` - текстовую ремарку для понимания
  ошибки человеком.
- RPC-нотификации работают как указано в стандарте, запросы без поля `id` не получают ответа, но сервер может
  их обработать по своему усмотрению.

Дополнительно стоит учитывать что сервер сам может передавать данные на клиент без получения запроса - например
так работает рассылка о событиях для пользователя, данные поступают через WebSocket со стороны сервера и
являются RPC-нотификациями, что не требует от клиента возвращать серверу какой-либо ответ.

#### Формат апи-документации

Будет описан позднее...

## API

### Регистрация

Регистрация предоставляет возможность зарегистрировать пользователя используюя различные стратегии
регистрации. Стратегию регистрации выбирает сервер. В любой момент времени можно получить текущий шаг
регистрации пользователя, что позволяет прерывать процесс регистрации на необходимое время. Однако,
стоит учесть что существуют лимиты времени на ожидание продолжения регистрации, после их истечения
пользователь удаляется из базы предварительной регистрации, что высвобождает занятое имя и регистрацию
под указанным именем можно инициировать снова.

---

#### `registration.getState`

**Запрос ===>**

|       Процедура       | Авторизация  | Описание                                  |
| :-------------------: | :----------: | ----------------------------------------- |
| registration.getState | Не требуется | Получить шаг регистрации для пользователя |

| Параметр |  Тип   | Обяз. | Описание         |
| :------: | :----: | :---: | ---------------- |
|   user   | string |  Да   | Имя пользователя |

Пример:

Получаем состояние регистрации для пользователя

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "registration.getState",
  "params": {
    "user": "destroyer2k"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `registration.firstStep`

**Запрос ===>**

|       Процедура        | Авторизация  | Описание                        |
| :--------------------: | :----------: | ------------------------------- |
| registration.firstStep | Не требуется | Сделать первый шаг регистрациия |

| Параметр |  Тип   |      Обяз.       | Описание                  |
| :------: | :----: | :--------------: | ------------------------- |
|   user   | string |        Да        | Имя пользователя          |
|  phone   | string |        Да        | Телефон пользователя      |
|   mail   | string |        Да        | Почта пользователя        |
| captcha  | string | Публичный сервер | Верификационный код капчи |

Пример:

Запускаем первый шаг регистрации

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "registration.firstStep",
  "params": {
    "user": "destroyer2k",
    "phone": "5555555",
    "mail": "user@site.com",
    "captcha": "dEdOdpabEsiboD4z"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `registration.verify`

**Запрос ===>**

|      Процедура      | Авторизация  | Применимость        | Описание                        |
| :-----------------: | :----------: | ------------------- | ------------------------------- |
| registration.verify | Не требуется | Стратегия smsToUser | Сделать верификацию регистрации |

| Параметр |       Тип       | Обяз. | Описание         |
| :------: | :-------------: | :---: | ---------------- |
|   user   |     string      |  Да   | Имя пользователя |
|   code   | string / number |  Да   | Код из смс       |

Пример:

Верифицируем код пользователя из CMC

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "registration.verify",
  "params": {
    "user": "destroyer2k",
    "code": 4682
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `registration.toBlockChain`

**Запрос ===>**

|         Процедура         | Авторизация  | Описание                                  |
| :-----------------------: | :----------: | ----------------------------------------- |
| registration.toBlockChain | Не требуется | Зарегистрировать пользователя в блокчейне |

| Параметр |  Тип   | Обяз. | Описание                 |
| :------: | :----: | :---: | ------------------------ |
|   user   | string |  Да   | Имя пользователя         |
|  owner   | string |  Да   | Ключ владельца           |
|  active  | string |  Да   | Активный ключ            |
| posting  | string |  Да   | Постинг ключ             |
|   memo   | string |  Да   | Мемо ключ (ключ заметок) |

Пример:

Регистрируем пользователя непосредственно в блокчейне

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "registration.toBlockChain",
  "params": {
    "user": "destroyer2k",
    "owner": "SkdoEpqdDldinm",
    "active": "dfoekDfoakeiE",
    "posting": "piqkEldioldoke",
    "memo": "oPqiamjklEoEEa"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `registration.changePhone`

**Запрос ===>**

|        Процедура         | Авторизация  | Применимость                     | Описание               |
| :----------------------: | :----------: | -------------------------------- | ---------------------- |
| registration.changePhone | Не требуется | Стратегия smsFromUser, smsToUser | Сменить номер телефона |

| Параметр |  Тип   |      Обяз.       | Описание                  |
| :------: | :----: | :--------------: | ------------------------- |
|   user   | string |        Да        | Имя пользователя          |
|  phone   | string |        Да        | Телефон пользователя      |
| captcha  | string | Публичный сервер | Верификационный код капчи |

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

Пример:

Меняем телефон пользователя на новый

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "registration.changePhone",
  "params": {
    "user": "destroyer2k",
    "phone": "5555566",
    "captcha": "dlkEdlsIpqpkaZdkl"
  }
}
```

---

#### `registration.resendSmsCode`

**Запрос ===>**

|         Процедура          | Авторизация  | Применимость        | Описание                                  |
| :------------------------: | :----------: | ------------------- | ----------------------------------------- |
| registration.resendSmsCode | Не требуется | Стратегия smsToUser | Переотправить код на телефон пользователя |

| Параметр |  Тип   |     Обяз.      | Описание             |
| :------: | :----: | :------------: | -------------------- |
|   user   | string | Если нет phone | Имя пользователя     |
|  phone   | string | Если нет user  | Телефон пользователя |

Пример:

Отправка смс на телефон пользователя повторно

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "registration.resendSmsCode",
  "params": {
    "user": "destroyer2k",
    "phone": "55555555"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `registration.subscribeOnSmsGet`

**Запрос ===>**

|           Процедура            | Авторизация  | Применимость          | Описание                                     |
| :----------------------------: | :----------: | --------------------- | -------------------------------------------- |
| registration.subscribeOnSmsGet | Не требуется | Стратегия smsFromUser | Подписаться на получение смс от пользователя |

| Параметр |  Тип   |     Обяз.      | Описание             |
| :------: | :----: | :------------: | -------------------- |
|   user   | string | Если нет phone | Имя пользователя     |
|  phone   | string | Если нет user  | Телефон пользователя |

Пример:

Подписка на факт получение смс от пользователя

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "registration.subscribeOnSmsGet",
  "params": {
    "user": "destroyer2k",
    "phone": "55555555"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

### Настройки пользователя

Настройки пользователя представляют частично структурированное хранилище не критичных настроек
пользователя, таких как язык интерфейса, предпочитаемая отображаемая валюта, оповещение о каких-либо
комментариях и подобное.

При этом подразумевается 3 типа настроек:

- notify - хранилище настроек web-нотификаций
- push - хранилище настроек mobile-нотификаций
- basic - хранилище иных неструктурированных настроек

---

#### `options.get`

**Запрос ===>**

|  Процедура  | Авторизация | Описание                        |
| :---------: | :---------: | ------------------------------- |
| options.get |     Да      | Получить настройки пользователя |

| Параметр |  Тип   | Обяз. | Описание                                                                                                                                                                                                                           |
| :------: | :----: | :---: | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| profile  | string |  Да   | Произвольная строка - например идентификатор устройства, класса устройств или иной произвольный идентификатор клиента, например для Android-телефонов это может быть идентификатор устройства, а для браузеров просто строка `web` |

Пример:

Получаем настройки текущего авторизованного пользователя по профилю `browser`

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "options.get",
  "params": {
    "profile": "browser"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `options.set`

**Запрос ===>**

|  Процедура  | Авторизация | Описание                         |
| :---------: | :---------: | -------------------------------- |
| options.set |     Да      | Сохранить настройки пользователя |

| Параметр |  Тип   | Обяз. | Описание                                                                                                                                                                                                                                                                                   |
| :------: | :----: | :---: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| profile  | string |  Да   | Произвольная строка - например идентификатор устройства, класса устройств или иной произвольный идентификатор клиента, например для Android-телефонов это может быть идентификатор устройства, а для браузеров просто строка `web`                                                         |
|  basic   | object |  Нет  | Произвольный JSON-объект данных, который будет присоединен к существующим данным слиянием по ключам - измения затронут только те ключи существующих данных что находятся в JSON-объекте, произойдет их полная замена на новые данные, остальные данные по другим ключам затронуты не будут |

| Параметр | **\_** |      **\_**       |   Тип   | Обяз. | Описание                                                                                                                                                                                                                                                                                                |
| :------: | :----: | :---------------: | :-----: | :---: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|  notify  |        |                   | object  |  Нет  | JSON-объект настроек web-нотификаций                                                                                                                                                                                                                                                                    |
|          |  show  |                   | object  |  Нет  | JSON-объект настроек отображения нотификаций, который будет присоединен к существующим данным слиянием по ключам - измения затронут только те ключи существующих данных что находятся в JSON-объекте, произойдет их полная замена на новые данные, остальные данные по другим ключам затронуты не будут |
|          |        |      upvote       | boolean |  Нет  | Оповещения о лайке (голосе за)                                                                                                                                                                                                                                                                          |
|          |        |     downvote      | boolean |  Нет  | Оповещения о дизлайке (голосе против)                                                                                                                                                                                                                                                                   |
|          |        |     transfer      | boolean |  Нет  | Оповещения о переводе средств                                                                                                                                                                                                                                                                           |
|          |        |       reply       | boolean |  Нет  | Оповещение об ответе на пост/комментарий                                                                                                                                                                                                                                                                |
|          |        |     subscribe     | boolean |  Нет  | Оповещение о подписке                                                                                                                                                                                                                                                                                   |
|          |        |    unsubscribe    | boolean |  Нет  | Оповещение об отписке                                                                                                                                                                                                                                                                                   |
|          |        |      mention      | boolean |  Нет  | Оповещение об упоминании в посте/комментарии                                                                                                                                                                                                                                                            |
|          |        |      repost       | boolean |  Нет  | Оповещение о репосте                                                                                                                                                                                                                                                                                    |
|          |        |      reward       | boolean |  Нет  | Оповещение о награде за пост/комментарий                                                                                                                                                                                                                                                                |
|          |        |   curatorReward   | boolean |  Нет  | Оповещение о награде за устаноку лайка за пост/комментарий                                                                                                                                                                                                                                              |
|          |        |      message      | boolean |  Нет  | Оповещение о личном сообщении через блокчейн                                                                                                                                                                                                                                                            |
|          |        |    witnessVote    | boolean |  Нет  | Оповещение об установке голосова другим пользователем за делегатство текущего                                                                                                                                                                                                                           |
|          |        | witnessCancelVote | boolean |  Нет  | Оповещение о снятии голоса другим пользователем за делегатство текущего                                                                                                                                                                                                                                 |

| Параметр | **\_** |      **\_**       |   Тип   | Обяз. | Описание                                                                                                                                                                                                                                                                                                |
| :------: | :----: | :---------------: | :-----: | :---: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|   push   |        |                   | object  |  Нет  | JSON-объект настроек mobile-нотификаций                                                                                                                                                                                                                                                                 |
|          |  show  |                   | object  |  Нет  | JSON-объект настроек отображения нотификаций, который будет присоединен к существующим данным слиянием по ключам - измения затронут только те ключи существующих данных что находятся в JSON-объекте, произойдет их полная замена на новые данные, остальные данные по другим ключам затронуты не будут |
|          |        |      upvote       | boolean |  Нет  | Оповещения о лайке (голосе за)                                                                                                                                                                                                                                                                          |
|          |        |     downvote      | boolean |  Нет  | Оповещения о дизлайке (голосе против)                                                                                                                                                                                                                                                                   |
|          |        |     transfer      | boolean |  Нет  | Оповещения о переводе средств                                                                                                                                                                                                                                                                           |
|          |        |       reply       | boolean |  Нет  | Оповещение об ответе на пост/комментарий                                                                                                                                                                                                                                                                |
|          |        |     subscribe     | boolean |  Нет  | Оповещение о подписке                                                                                                                                                                                                                                                                                   |
|          |        |    unsubscribe    | boolean |  Нет  | Оповещение об отписке                                                                                                                                                                                                                                                                                   |
|          |        |      mention      | boolean |  Нет  | Оповещение об упоминании в посте/комментарии                                                                                                                                                                                                                                                            |
|          |        |      repost       | boolean |  Нет  | Оповещение о репосте                                                                                                                                                                                                                                                                                    |
|          |        |      reward       | boolean |  Нет  | Оповещение о награде за пост/комментарий                                                                                                                                                                                                                                                                |
|          |        |   curatorReward   | boolean |  Нет  | Оповещение о награде за устаноку лайка за пост/комментарий                                                                                                                                                                                                                                              |
|          |        |      message      | boolean |  Нет  | Оповещение о личном сообщении через блокчейн                                                                                                                                                                                                                                                            |
|          |        |    witnessVote    | boolean |  Нет  | Оповещение об установке голосова другим пользователем за делегатство текущего                                                                                                                                                                                                                           |
|          |        | witnessCancelVote | boolean |  Нет  | Оповещение о снятии голоса другим пользователем за делегатство текущего                                                                                                                                                                                                                                 |

| Параметр | **\_** | Варианты | По умолч. |  Тип   | Обяз. | Описание                     |
| :------: | :----: | :------: | :-------: | :----: | :---: | ---------------------------- |
|   ...    |  lang  |          |    ru     | string |  Нет  | Язык рассылаемых уведомлений |
|          |        |    ru    |           | string |  Нет  | Русский язык                 |
|          |        |    en    |           | string |  Нет  | Английский язык              |

Пример:

Установка предпочитаемой валюты отображения на `USD`, а языка мобильных оповещений на английский

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "options.set",
  "params": {
    "profile": "web",
    "basic": {
      "currency": "USD"
    },
    "push": {
      "lang": "en"
    }
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

### Онлайн-нотификации с учетом настроек (только web)

// Описание

---

#### `TODO`

**Запрос ===>**

| Процедура | Авторизация | Описание |
| :-------: | :---------: | -------- |
|   TODO    |    TODO     | TODO     |

| Параметр | Тип | Обяз. | Описание |
| :------: | :-: | :---: | -------- |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "TODO",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `TODO`

**Запрос ===>**

| Процедура | Авторизация | Описание |
| :-------: | :---------: | -------- |
|   TODO    |    TODO     | TODO     |

| Параметр | Тип | Обяз. | Описание |
| :------: | :-: | :---: | -------- |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "TODO",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `TODO`

**Запрос ===>**

| Процедура | Авторизация | Описание |
| :-------: | :---------: | -------- |
|   TODO    |    TODO     | TODO     |

| Параметр | Тип | Обяз. | Описание |
| :------: | :-: | :---: | -------- |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "TODO",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `TODO`

**Запрос ===>**

| Процедура | Авторизация | Описание |
| :-------: | :---------: | -------- |
|   TODO    |    TODO     | TODO     |

| Параметр | Тип | Обяз. | Описание |
| :------: | :-: | :---: | -------- |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "TODO",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

```
onlineNotify.on:               // Подписывает на онлайн оповещения для пользователя

onlineNotify.off:              // Отписывает от онлайн оповещений для пользователя

onlineNotify.history:                  // Получение истории нотификаций с учетом настроек пользователя
    fromId <string|null>(null)     // ID с которого нужно начать показывать историю, опционально
            limit <number>(10)             // Необходимое количество строк истории
            markAsViewed <boolean>(true)   // Пометить ли все выгруженные записи как прочитанные
            freshOnly <boolean>(false)     // Возвратить только непрочитанные данные

onlineNotify.historyFresh:  // Получение количества непрочитанных нотификаций с учетом настроек пользователя
```

### Push-нотификации с учетом настроек (только mobile)

// Описание

---

#### `TODO`

**Запрос ===>**

| Процедура | Авторизация | Описание |
| :-------: | :---------: | -------- |
|   TODO    |    TODO     | TODO     |

| Параметр | Тип | Обяз. | Описание |
| :------: | :-: | :---: | -------- |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "TODO",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `TODO`

**Запрос ===>**

| Процедура | Авторизация | Описание |
| :-------: | :---------: | -------- |
|   TODO    |    TODO     | TODO     |

| Параметр | Тип | Обяз. | Описание |
| :------: | :-: | :---: | -------- |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "TODO",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `TODO`

**Запрос ===>**

| Процедура | Авторизация | Описание |
| :-------: | :---------: | -------- |
|   TODO    |    TODO     | TODO     |

| Параметр | Тип | Обяз. | Описание |
| :------: | :-: | :---: | -------- |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "TODO",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `TODO`

**Запрос ===>**

| Процедура | Авторизация | Описание |
| :-------: | :---------: | -------- |
|   TODO    |    TODO     | TODO     |

| Параметр | Тип | Обяз. | Описание |
| :------: | :-: | :---: | -------- |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "TODO",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

```
push.notifyOn:              // Подписывает на push-оповещения для пользователя по профилю

        key <string>        // Ключ рассылки нотификации
        profile <string>    // Идентификатор профиля пользователя

push.notifyOff:             // Отписывает от push-оповещений для пользователя по профилю

        key <string>        // Ключ рассылки нотификации
        profile <string>    // Идентификатор профиля пользователя

push.history:                              // Получение истории нотификаций с учетом настроек пользователя

        profile <profile>                  // Профиль пользователя
        afterId <string|null>(null)        // ID после которого нужно начать показывать историю, опционально
        limit <number>(10)                 // Необходимое количество строк истории
        markAsViewed <boolean>(true)       // Пометить ли все выгруженные записи как прочитанные
        freshOnly <boolean>(false)         // Возвратить только непрочитанные данные
        types <string[]|'all'|null>(null)  // Массив необходимых типов нотификаций из которого будут вычтены те типы,
                                           // которые пользователь отключил в своих настройках.
                                           // Отсутствие параметра эквивалентно запросу 'all', который возвращает
                                           // все доступные типы согласно настройкам пользователя.
            [
             vote                          // лайк (голос)
            | flag                         // флаг (дизлайк, жалоба)
            | transfer                     // перевод средств
            | reply                        // ответ на пост или комментарий
            | subscribe                    // подписка на блог
            | unsubscribe                  // отписка от блога
            | mention                      // упоминание в посте, заголовке поста или в комменте (через @)
            | repost                       // репост
            | reward                       // награда пользователю
            | curatorReward                // награда куратору
            | message                      // личное сообщение (не реализованно в данной версии)
            | witnessVote                  // голос за делегата
            | witnessCancelVote            // отмена голоса за делегата
            ]

push.historyFresh:                     // Получение количества непрочитанных нотификаций с учетом настроек пользователя

        profile <profile>              // Профиль пользователя
```

### Нотификации пользователя (черные списки и данные в сыром виде)

// Описание

---

#### `TODO`

**Запрос ===>**

| Процедура | Авторизация | Описание |
| :-------: | :---------: | -------- |
|   TODO    |    TODO     | TODO     |

| Параметр | Тип | Обяз. | Описание |
| :------: | :-: | :---: | -------- |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "TODO",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `TODO`

**Запрос ===>**

| Процедура | Авторизация | Описание |
| :-------: | :---------: | -------- |
|   TODO    |    TODO     | TODO     |

| Параметр | Тип | Обяз. | Описание |
| :------: | :-: | :---: | -------- |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "TODO",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `TODO`

**Запрос ===>**

| Процедура | Авторизация | Описание |
| :-------: | :---------: | -------- |
|   TODO    |    TODO     | TODO     |

| Параметр | Тип | Обяз. | Описание |
| :------: | :-: | :---: | -------- |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "TODO",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `TODO`

**Запрос ===>**

| Процедура | Авторизация | Описание |
| :-------: | :---------: | -------- |
|   TODO    |    TODO     | TODO     |

| Параметр | Тип | Обяз. | Описание |
| :------: | :-: | :---: | -------- |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "TODO",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `TODO`

**Запрос ===>**

| Процедура | Авторизация | Описание |
| :-------: | :---------: | -------- |
|   TODO    |    TODO     | TODO     |

| Параметр | Тип | Обяз. | Описание |
| :------: | :-: | :---: | -------- |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "TODO",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `TODO`

**Запрос ===>**

| Процедура | Авторизация | Описание |
| :-------: | :---------: | -------- |
|   TODO    |    TODO     | TODO     |

| Параметр | Тип | Обяз. | Описание |
| :------: | :-: | :---: | -------- |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "TODO",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `TODO`

**Запрос ===>**

| Процедура | Авторизация | Описание |
| :-------: | :---------: | -------- |
|   TODO    |    TODO     | TODO     |

| Параметр | Тип | Обяз. | Описание |
| :------: | :-: | :---: | -------- |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "TODO",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

```
notify.getHistory:                     // Получение истории нотификаций

        fromId <string|null>(null)     // ID с которого нужно начать показывать историю, опционально
        limit <number>(10)             // Необходимое количество строк истории
        markAsViewed <boolean>(true)   // Пометить ли все выгруженные записи как прочитанные
        freshOnly <boolean>(false)     // Возвратить только непрочитанные данные
        types <'all'|string[]>('all')  // Массив необходимых типов нотификаций или 'all' если нужны все
            [
              vote               // лайк (голос)
            | flag               // флаг (дизлайк, жалоба)
            | transfer           // перевод средств
            | reply              // ответ на пост или комментарий
            | subscribe          // подписка на блог
            | unsubscribe        // отписка от блога
            | mention            // упоминание в посте, заголовке поста или в комменте (через @)
            | repost             // репост
            | reward             // награда пользователю
            | curatorReward      // награда куратору
            | message            // личное сообщение (не реализованно в данной версии)
            | witnessVote        // голос за делегата
            | witnessCancelVote  // отмена голоса за делегата
            ]

notify.getHistoryFresh:      // Получение количества непрочитанных нотификаций


notify.markAsViewed:         // Пометить указанные нотификации как прочитанные

        ids <string[]>       // Список идентификаторов для пометки

notify.markAllAsViewed:      // Пометить все нотификации как прочитанные


notify.getBlackList:         // Возвращает черный список пользователя


notify.addToBlackList:       // Добавляет пользователя в черный список
     banned <string>         // Имя пользователя для добавления

notify.removeFromBlackList:  // Исключает пользователя из черного списка
     banned <string>         // Имя пользователя для исключения
```

### Избранное

// Описание

---

#### `TODO`

**Запрос ===>**

| Процедура | Авторизация | Описание |
| :-------: | :---------: | -------- |
|   TODO    |    TODO     | TODO     |

| Параметр | Тип | Обяз. | Описание |
| :------: | :-: | :---: | -------- |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "TODO",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `TODO`

**Запрос ===>**

| Процедура | Авторизация | Описание |
| :-------: | :---------: | -------- |
|   TODO    |    TODO     | TODO     |

| Параметр | Тип | Обяз. | Описание |
| :------: | :-: | :---: | -------- |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "TODO",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `TODO`

**Запрос ===>**

| Процедура | Авторизация | Описание |
| :-------: | :---------: | -------- |
|   TODO    |    TODO     | TODO     |

| Параметр | Тип | Обяз. | Описание |
| :------: | :-: | :---: | -------- |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "TODO",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

```
favorites.get:               // Получить избранные посты пользователя


favorites.add:               // Добавить пост в избранные
        permlink <string>    // Пермлинк поста

favorites.remove:            // Удалить пост из избранных
        permlink <string>    // Пермлинк поста
```

### Мета-данные

// Описание

---

#### `TODO`

**Запрос ===>**

| Процедура | Авторизация | Описание |
| :-------: | :---------: | -------- |
|   TODO    |    TODO     | TODO     |

| Параметр | Тип | Обяз. | Описание |
| :------: | :-: | :---: | -------- |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "TODO",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `TODO`

**Запрос ===>**

| Процедура | Авторизация | Описание |
| :-------: | :---------: | -------- |
|   TODO    |    TODO     | TODO     |

| Параметр | Тип | Обяз. | Описание |
| :------: | :-: | :---: | -------- |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "TODO",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `TODO`

**Запрос ===>**

| Процедура | Авторизация | Описание |
| :-------: | :---------: | -------- |
|   TODO    |    TODO     | TODO     |

| Параметр | Тип | Обяз. | Описание |
| :------: | :-: | :---: | -------- |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "TODO",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `TODO`

**Запрос ===>**

| Процедура | Авторизация | Описание |
| :-------: | :---------: | -------- |
|   TODO    |    TODO     | TODO     |

| Параметр | Тип | Обяз. | Описание |
| :------: | :-: | :---: | -------- |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "TODO",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

```
meta.markUserOnline:         // Пометить юзера как онлайн

Не требует авторизацию.

meta.recordPostView              // Запись факта просмотра поста
    postLink <string>            // Полная ссылка на пост author/perm-link
    fingerPrint <string>         // Finger print браузера

meta.getPostsViewCount           // Получить количество просмотров для постов
    postLinks <string[]>         // Список ссылок на посты в формате author/perm-link

meta.getUserLastOnline:          // Получить время (timestamp) последного онлайна пользователей
    user <string>                // Имя пользователя

```

### Курсы валют

// Описание

---

#### `rates.getActual`

**Запрос ===>**

|    Процедура    | Авторизация | Описание                         |
| :-------------: | :---------: | -------------------------------- |
| rates.getActual |     Нет     | Получить актуальные курсы обмена |

| Параметры отсутствуют |
| :-------------------: |


Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "rates.getActual",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `rates.getHistorical`

**Запрос ===>**

|      Процедура      | Авторизация | Описание                       |
| :-----------------: | :---------: | ------------------------------ |
| rates.getHistorical |     Нет     | Получить историю курсов обмена |

| Параметр |     Тип      | Обяз. | Описание         |
| :------: | :----------: | :---: | ---------------- |
|   date   | string(Date) |  Да   | Необходимая дата |

Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "rates.getHistorical",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `rates.getHistoricalMulti`

**Запрос ===>**

|        Процедура         | Авторизация | Описание                                          |
| :----------------------: | :---------: | ------------------------------------------------- |
| rates.getHistoricalMulti |     Нет     | Получить историю курсов обмена для нескольких дат |

| Параметр |      Тип       | Обяз. | Описание               |
| :------: | :------------: | :---: | ---------------------- |
|  dates   | string(Date)[] |  Да   | Массив необходимых дат |

Пример:

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "rates.getHistoricalMulti",
  "params": {
    // TODO Будет описан позднее
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

--

### Контент и ленты

// Описание

---

#### `content.getProfile`

**Запрос ===>**

|     Процедура      | Авторизация  | Описание                       |
| :----------------: | :----------: | ------------------------------ |
| content.getProfile | Не требуется | Получение профиля пользователя |

| Параметр |  Тип   | Обяз. | Описание                   |
| :------: | :----: | :---: | -------------------------- |
|  userId  | string |  Да   | Идентификатор пользователя |

Пример:

Получить профиль пользователя `destroyer2k`

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "content.getProfile",
  "params": {
    "userId": "destroyer2k"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `content.getPost`

**Запрос ===>**

|    Процедура    | Авторизация  | Описание        |
| :-------------: | :----------: | --------------- |
| content.getPost | Не требуется | Получение поста |

|  Параметр   |  Тип   | Обяз. | Описание                   |
| :---------: | :----: | :---: | -------------------------- |
|   userId    | string |  Да   | Идентификатор пользователя |
|  permlink   | string |  Да   | Пермлинк поста             |
| refBlockNum | number |  Да   | Привязанный блок поста     |

Пример:

Получить пост, идентифицируемый указанными параметрами

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "content.getPost",
  "params": {
    "userId": "destroyer2k",
    "permlink": "myowncontent",
    "refBlockNum": 12345
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `content.getFeed`

**Запрос ===>**

|    Процедура    | Авторизация  | Описание               |
| :-------------: | :----------: | ---------------------- |
| content.getFeed | Не требуется | Получение ленты постов |

|  Параметр   |  Тип   |               Обяз.                | По умолч. |         Варианты         | Описание                                                                                   |
| :---------: | :----: | :--------------------------------: | :-------: | :----------------------: | ------------------------------------------------------------------------------------------ |
|    type     | string |                Нет                 | community |                          | Тип ленты                                                                                  |
|             |        |                                    |           |        community         | Лента комьюнити                                                                            |
|             |        |                                    |           |      subscriptions       | Лента подписок пользователя                                                                |
|             |        |                                    |           |          byUser          | Лента постов самого пользователя                                                           |
|   sortBy    | string |                Нет                 |   time    |                          | Способ сортировки                                                                          |
|             |        |                                    |           |           time           | Сначала старые, потом новые                                                                |
|             |        |                                    |           |         timeDesc         | Сначала новые, потом старые                                                                |
|             |        |                                    |           | popular (type=community) | По популярности                                                                            |
|  timeframe  | string |  type=community и sortBy=popular   |    day    |                          | Область выборки сортировки                                                                 |
|             |        |                                    |           |           day            | За день                                                                                    |
|             |        |                                    |           |           week           | За неделю                                                                                  |
|             |        |                                    |           |          month           | За месяц                                                                                   |
|             |        |                                    |           |           year           | За год                                                                                     |
|             |        |                                    |           |           all            | За всё время                                                                               |
|             |        |                                    |           |        WilsonHot         | Aлгоритм Вилсона - актуальный контент сейчас                                               |
|             |        |                                    |           |      WilsonTrending      | Aлгоритм Вилсона - в целом популярный контент                                              |
| sequenceKey | string |                Нет                 |   null    |                          | Ключ пагинации с сервера для получения следующего списка данных, null вернет первый список |
|    limit    | number |                Нет                 |    10     |                          | Количество необходимых постов                                                              |
|   userId    | string | type=subscriptions или type=byUser |   _нет_   |                          | Идентификатор пользователя                                                                 |
| communityId | string |           type=community           |   _нет_   |                          | Идентификатор комьюнити                                                                    |

Пример:

Получить ленту популярного контента для комьюнити `gls`

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "content.getFeed",
  "params": {
    "sortBy": "popular",
    "communityId": "gls"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

#### `content.getComments`

**Запрос ===>**

|      Процедура      | Авторизация  | Описание                     |
| :-----------------: | :----------: | ---------------------------- |
| content.getComments | Не требуется | Получение ленты комментариев |

|  Параметр   |  Тип   |          Обяз.          | По умолч. | Варианты | Описание                                                                                   |
| :---------: | :----: | :---------------------: | :-------: | :------: | ------------------------------------------------------------------------------------------ |
|   sortBy    | string |           Нет           |   time    |          | Способ сортировки                                                                          |
|             |        |                         |           |   time   | Сначала старые, потом новые                                                                |
|             |        |                         |           | timeDesc | Сначала новые, потом старые                                                                |
| sequenceKey | string |           Нет           |   null    |          | Ключ пагинации с сервера для получения следующего списка данных, null вернет первый список |
|    limit    | number |           Нет           |    10     |          | Количество необходимых комментариев                                                        |
|    type     | string |           Нет           |   post    |          | Тип ленты комментариев                                                                     |
|             |        |                         |           |   post   | Получить комментарии для поста                                                             |
|             |        |                         |           |   user   | Получить комментарии пользователя                                                          |
|   userId    | string | type=user или type=post |   _нет_   |          | Идентификатор пользователя                                                                 |
|  permlink   | string |        type=post        |   _нет_   |          | Пермлинк поста                                                                             |
| refBlockNum | number |        type=post        |   _нет_   |          | Привязанный блок поста                                                                     |

Пример:

Получить список комментариев для поста, идентифицируемого указанными параметрами

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "content.getComments",
  "params": {
    "userId": "destroyer2k",
    "permlink": "myowncontent",
    "refBlockNum": 12345
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

### Встроенный контент

// Описание

---

#### `frame.getEmbed`

**Запрос ===>**

|   Процедура    | Авторизация  | Описание                                              |
| :------------: | :----------: | ----------------------------------------------------- |
| frame.getEmbed | Не требуется | Получить обработанные данные для встраивания контента |

| Параметр |  Тип   | Обяз. | По умолч. | Варианты | Описание                       |
| :------: | :----: | :---: | :-------: | :------: | ------------------------------ |
|   type   | string |  Да   |   _нет_   |          | Тип обработки                  |
|          |        |       |           |  oembed  | Обработать сервисом "oembed"   |
|          |        |       |           | iframely | Обработать сервисом "iframely" |
|   url    | string |  Да   |   _нет_   |          | Ссылка на контент              |

Пример:

Обработать и получить контент по ссылке `https://site.com/content` используя `oembed`

```json
{
  "id": 1,
  "jsonrpc": "2.0",
  "method": "frame.getEmbed",
  "params": {
    "type": "oembed",
    "url": "https://site.com/content"
  }
}
```

**<=== Ответ**

_Не описан..._

**<=x= Ошибки**

_Не описаны..._

---

### Авторизация

```
Не требует авторизацию.

 'auth.generateSecret':   // Получить секрет авторизации для подписи
     <empty>  // Без параметров

 <- result:               // Варианты ответа
     (success):           // В случае успеха
         secret <string>  // Секрет авторизации

 <- error:                // Варианты ошибок
     <shared>             // Нет уникальных ошибок

 'auth.authorize':                    // Авторизоваться
     user <string>        // Имя пользователя
     sign <sign>          // Подпись пользователя

 <- result:              // Варианты ответа
     (success):          // В случае успеха
         status <'OK'>   // Прошло успешно

 <- error:
     1102   // Доступ запрещен, не валидный формат данных авторизации
     1103   // Доступ запрещен, блокчейн отверг авторизацию

 <shared>:

 <- error:  // Варианты ошибок
     1101   // Доступ запрещен, запрашиваемый метод не входит в разрешенный список
     1104   // Ошибка передачи данных микросервису фасаду, вероятно проблема со связью
```